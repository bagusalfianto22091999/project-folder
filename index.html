<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Music</title>

<style>
:root{
  --green:#1db954;
  --dark:#121212;
}
*{box-sizing:border-box}

body{
  margin:0;
  background:black;
  color:white;
  font-family:system-ui;
  display:flex;
  justify-content:center;
  padding:20px;
}

/* ===== VIDEO BACKGROUND ===== */
.video-bg{
  position:fixed;
  inset:0;
  z-index:-2;
  overflow:hidden;
}
.video-bg iframe{
  width:100vw;
  height:100vh;
  transform:scale(1.3);
  filter:blur(20px) brightness(.4);
  pointer-events:none;
}

/* overlay gelap */
.video-overlay{
  position:fixed;
  inset:0;
  background:radial-gradient(circle at top,transparent 20%,#000 80%);
  z-index:-1;
}

/* ===== PLAYER ===== */
.player{
  width:100%;
  max-width:420px;
  background:rgba(18,18,18,.85);
  backdrop-filter:blur(10px);
  border-radius:18px;
  padding:20px;
}

.header{text-align:center;font-weight:bold;margin-bottom:10px}

.song-title{
  text-align:center;
  font-weight:bold;
  color:var(--green);
  margin-bottom:14px;
}

/* VISUALIZER */
.visualizer{
  display:flex;
  align-items:flex-end;
  justify-content:center;
  height:120px;
  gap:6px;
  margin-bottom:16px;
}
.bar{
  width:6px;
  height:20px;
  background:var(--green);
  border-radius:4px;
}

/* TIME */
.time{
  display:flex;
  justify-content:space-between;
  font-size:12px;
  color:#aaa;
}

input[type=range]{
  width:100%;
  margin:8px 0 18px;
  -webkit-appearance:none;
  height:4px;
  border-radius:4px;
  background:linear-gradient(
    to right,
    var(--green) 0%,
    var(--green) var(--seek,0%),
    #333 var(--seek,0%),
    #333 100%
  );
}
input[type=range]::-webkit-slider-thumb{
  -webkit-appearance:none;
  width:14px;height:14px;
  border-radius:50%;
  background:var(--green);
}

/* CONTROLS */
.controls{
  display:flex;
  justify-content:center;
  gap:18px;
}
.controls button{
  width:48px;height:48px;
  border-radius:50%;
  border:1px solid #1f1f1f;
  background:transparent;
  color:#9a9a9a;
  font-size:22px;
}
#playBtn{
  width:64px;height:64px;
  font-size:26px;
}
.controls button.active,
#playBtn.playing{
  color:var(--green);
  border-color:rgba(29,185,84,.6);
  box-shadow:inset 0 0 6px rgba(29,185,84,.35);
}
</style>
</head>

<body>

<!-- VIDEO BACKGROUND -->
<div class="video-bg">
  <iframe id="ytBg"
    src=""
    allow="autoplay; encrypted-media"
    allowfullscreen>
  </iframe>
</div>
<div class="video-overlay"></div>

<div class="player">
  <div class="header">My Music</div>
  <div class="song-title" id="title">Pilih Lagu</div>

  <div class="visualizer">
    <div class="bar"></div><div class="bar"></div><div class="bar"></div>
    <div class="bar"></div><div class="bar"></div>
    <div class="bar"></div><div class="bar"></div>
  </div>

  <div class="time">
    <span id="cur">0:00</span>
    <span id="dur">0:00</span>
  </div>

  <input type="range" id="seek" value="0">

  <div class="controls">
    <button id="prev">⏮️</button>
    <button id="playBtn">▶️</button>
    <button id="next">⏭️</button>
  </div>
</div>

<audio id="audio"></audio>

<script>
/* ===== PLAYLIST ===== */
const songs=[
  {
    name:"Bintang 5",
    file:"lagu/Remix/DJBINTANG5.mp3",
    yt:"rxekjz73d2Q"
  },
  {
    name:"Eman En Waktumu",
    file:"lagu/Remix/DJEMANENWAKTUMU.mp3",
    yt:"VIDEO_ID_YOUTUBE"
  }
];

const audio=document.getElementById("audio");
const yt=document.getElementById("ytBg");
const playBtn=document.getElementById("playBtn");
const title=document.getElementById("title");
const seek=document.getElementById("seek");
const cur=document.getElementById("cur");
const dur=document.getElementById("dur");
const bars=document.querySelectorAll(".bar");

let index=0;

/* VISUALIZER */
setInterval(()=>{
  bars.forEach(b=>{
    b.style.height=audio.paused?"20px":20+Math.random()*90+"px";
  });
},120);

/* LOAD SONG */
function loadSong(i){
  const s=songs[i];
  title.textContent=s.name;
  audio.src=s.file;

  yt.src=`https://www.youtube.com/embed/${s.yt}?autoplay=1&mute=1&controls=0&loop=1&playlist=${s.yt}&playsinline=1`;
}

/* PLAY */
function play(){
  audio.play();
  playBtn.textContent="⏸️";
  playBtn.classList.add("playing");
  yt.contentWindow.postMessage(
    '{"event":"command","func":"playVideo","args":""}',
    "*"
  );
}

/* PAUSE */
function pause(){
  audio.pause();
  playBtn.textContent="▶️";
  playBtn.classList.remove("playing");
  yt.contentWindow.postMessage(
    '{"event":"command","func":"pauseVideo","args":""}',
    "*"
  );
}

playBtn.onclick=()=>audio.paused?play():pause();

document.getElementById("next").onclick=()=>{
  index=(index+1)%songs.length;
  loadSong(index);
  play();
};

document.getElementById("prev").onclick=()=>{
  index=index?index-1:songs.length-1;
  loadSong(index);
  play();
};

/* SEEK */
audio.ontimeupdate=()=>{
  const p=(audio.currentTime/audio.duration)*100||0;
  seek.value=p;
  seek.style.setProperty("--seek",p+"%");
  cur.textContent=format(audio.currentTime);
};
audio.onloadedmetadata=()=>dur.textContent=format(audio.duration);
seek.oninput=()=>audio.currentTime=(seek.value/100)*audio.duration;

function format(s){
  const m=Math.floor(s/60);
  return m+":"+Math.floor(s%60).toString().padStart(2,"0");
}

/* INIT */
loadSong(0);
</script>

</body>
</html>
